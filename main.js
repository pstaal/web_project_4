!function(){"use strict";class e{constructor(e,t){this._settings=e,this._form=t}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_showInputError(e,t,s){const r=e.querySelector(".".concat(t.id,"-error"));t.classList.add(this._settings.inputErrorClass),r.textContent=s,r.classList.add(this._settings.errorClass)}_hideInputError(e,t){const s=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(this._settings.inputErrorClass),s.classList.remove(this._settings.errorClass),s.textContent=""}_toggleButtonState(e,t){this._hasInvalidInput(e)?(t.classList.add(this._settings.inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._settings.inactiveButtonClass),t.disabled=!1)}_disableButton(e){e.classList.add(this._settings.inactiveButtonClass),e.disabled=!0}_toggleInputError(e,t){t.validity.valid?this._hideInputError(e,t):this._showInputError(e,t,t.validationMessage)}_setEventListeners(e){e.addEventListener("submit",(e=>{e.preventDefault()}));const t=[...e.querySelectorAll(this._settings.inputSelector)],s=e.querySelector(this._settings.submitButtonSelector);e.addEventListener("reset",(()=>{this._disableButton(s)})),t.forEach((r=>{r.addEventListener("input",(()=>{this._toggleInputError(e,r),this._toggleButtonState(t,s)}))}))}resetValidation(e){const t=Array.from(e.querySelectorAll(".popup__input")),s=document.querySelector(this._form);t.forEach((e=>{this._hideInputError(s,e)}))}enableValidation(){const e=document.querySelector(this._form);this._setEventListeners(e)}}class t{constructor(e,t,s){this._text=e.text,this._imageLink=e.imageLink,this._cardSelector=t,this._handleCardClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".places__card").cloneNode(!0)}_toggleHeart(){this._heartIcon.classList.toggle("places__card-button-liked")}_removeCard(){this._element.remove(),this._element=null}_setEventListeners(){this._element.querySelector(".places__card-button").addEventListener("click",(e=>{this._toggleHeart(e)})),this._element.querySelector(".places__card-delete-icon").addEventListener("click",(e=>{this._removeCard(e)})),this._element.querySelector(".places__card-image").addEventListener("click",(e=>{this._handleCardClick({link:this._imageLink,text:this._text})}))}generateCard(){return this._element=this._getTemplate(),this._heartIcon=this._element.querySelector(".places__card-button"),this._setEventListeners(),this._element.querySelector(".places__card-image").src=this._imageLink,this._element.querySelector(".places__card-image").alt=this._text,this._element.querySelector(".places__card-title").textContent=this._text,this._element}}class s{constructor(e){this._popup=document.querySelector(e)}open(){this._popup.classList.add("popup_opened")}close(){this._popup.classList.remove("popup_opened")}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popup.querySelector(".popup__close").addEventListener("click",(()=>{this.close()})),document.addEventListener("keydown",(e=>{this._handleEscClose(e)})),document.addEventListener("click",(e=>{e.target.classList.contains("popup")&&document.querySelector(".popup_opened")&&this.close()}))}}class r extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._inputList=this._popup.querySelectorAll(".popup__input"),this._form=this._popup.querySelector(".popup__form")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const n=document.querySelector(".profile__button-name-change"),o=document.querySelector(".profile__button-add-place"),i=document.querySelector("[name='userName']"),a=document.querySelector("[name='userJob']"),l=document.querySelector(".popup-profile"),c=document.querySelector(".popup-place"),p=document.querySelector(".popup__form-profile"),u=document.querySelector(".popup__form-place"),_=new class{constructor(e){let{userNameSelector:t,userJobSelector:s}=e;this._profileName=document.querySelector(t),this._profileFunction=document.querySelector(s)}getUserInfo(){return{userName:this._profileName.textContent,userJob:this._profileFunction.textContent}}setUserInfo(e){let{userName:t,userJob:s}=e;this._profileName.textContent=t,this._profileFunction.textContent=s}}({userNameSelector:".profile__name",userJobSelector:".profile__function"});_.setUserInfo({userName:"Jacques Cousteau",userJob:"Explorer"});const d=new class extends s{constructor(e){super(e),this._popupImage=document.querySelector(".popup-picture__image"),this._popupImageTitle=document.querySelector(".popup-picture__title")}open(e,t){this._popupImage.setAttribute("src",e),this._popupImage.setAttribute("alt",t),this._popupImageTitle.textContent=t,super.open()}}(".popup-picture");function m(e){let{link:t,text:s}=e;d.open(t,s)}function h(e,s,r){return new t(e,s,r).generateCard()}d.setEventListeners();const g=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t=h({text:e.name,imageLink:e.link},"#card-template",m);g.addItem(t)}},".places");g.renderItems();const S=new r(".popup-place",(function(e){const t=h({text:e.title,imageLink:e.link},"#card-template",m);g.addItem(t),u.reset()}));S.setEventListeners();const v=new r(".popup-profile",(function(e){_.setUserInfo(e),p.reset()}));v.setEventListeners();const y=new e({inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},".popup__form-profile");y.enableValidation();const f=new e({inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},".popup__form-place");f.enableValidation(),o.addEventListener("click",(function(){f.resetValidation(c),S.open()})),n.addEventListener("click",(function(){y.resetValidation(l);const{userName:e,userJob:t}=_.getUserInfo();i.value=e,a.value=t,v.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIH1cbiAgICBcbiAgICBfaGFzSW52YWxpZElucHV0IChpbnB1dExpc3QpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHsgXG4gICAgXG4gICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7IFxuICAgIFxuICAgICAgICB9KTsgXG4gICAgICB9XG5cbiAgICBfc2hvd0lucHV0RXJyb3IgKGZvcm0sIGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlICkge1xuICAgICAgICAvLyBGaW5kIHRoZSBlcnJvciBtZXNzYWdlIGVsZW1lbnQgaW5zaWRlIHRoZSB2ZXJ5IGZ1bmN0aW9uXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICAvLyBUaGUgcmVzdCByZW1haW5zIHVuY2hhbmdlZFxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmVycm9yQ2xhc3MpO1xuICAgICAgfVxuICAgICAgXG4gICAgX2hpZGVJbnB1dEVycm9yIChmb3JtLCBpbnB1dEVsZW1lbnQgKSB7XG4gICAgICAgIC8vIEZpbmQgdGhlIGVycm9yIG1lc3NhZ2UgZWxlbWVudFxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgLy8gVGhlIHJlc3QgcmVtYWlucyB1bmNoYW5nZWRcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICB9XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIFxuICAgICAgX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCkge1xuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIFxuICAgIF90b2dnbGVJbnB1dEVycm9yIChmb3JtLCBpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAvLyBUaGUgcGFyYW1ldGVyIG9mIHNob3dJbnB1dEVycm9yKCkgaXMgbm93IGEgZm9ybSxcbiAgICAgICAgICAvLyB3aGljaCBjb250YWlucyBhIGZpZWxkIHRvIGJlIGNoZWNrZWRcbiAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihmb3JtLCBpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhlIHNhbWUgZm9yIGhpZGVJbnB1dEVycm9yKCksIEl0cyBwYXJhbWV0ZXIgaXMgbm93IGEgZm9ybSxcbiAgICAgICAgICAvLyB3aGljaCBjb250YWlucyBhIGZpZWxkIHRvIGJlIGNoZWNrZWRcbiAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtLCBpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgIF9zZXRFdmVudExpc3RlbmVycyhmb3JtKSB7XG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgICAgLy8gQ2FuY2VsIGRlZmF1bHQgYmVoYXZpb3IgZm9yIHRoZSBmb3JtXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuXG4gICBcblxuICAgIGNvbnN0IGlucHV0TGlzdCA9IFsuLi5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fc2V0dGluZ3MuaW5wdXRTZWxlY3RvcildO1xuICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgZm9ybS5hZGRFdmVudExpc3RlbmVyKFwicmVzZXRcIiwgKCkgPT4geyBcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCk7IFxuICAgIH0pOyBcbiAgXG4gICAgLy8gSXRlcmF0ZSBvdmVyIHRoZSByZXN1bHRpbmcgYXJyYXlcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAvLyBhZGQgdGhlIGlucHV0IGV2ZW50IGhhbmRsZXIgdG8gZWFjaCBmaWVsZFxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIC8vIENhbGwgdGhlIHRvZ2dsZUlucHV0RXJyb3IoKSBmdW5jdGlvbiBpbnNpZGUgdGhlIGNhbGxiYWNrLFxuICAgICAgICAvLyBhbmQgcGFzcyB0aGUgZm9ybSBhbmQgdGhlIGVsZW1lbnQgdG8gYmUgY2hlY2tlZCB0byBpdFxuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGZvcm0sIGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uIChwb3B1cCl7IFxuXG4gICAgY29uc3QgaW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20ocG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIikpOyBcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtKTtcblxuICAgIGlucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7IFxuXG4gICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm0sIGlucHV0RWxlbWVudCk7IFxuXG4gICAgfSk7IFxuXG4gIH07IFxuXG4gICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtKTtcblxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycyhmb3JtKTtcbiAgfVxufSIsIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcblxuICAgIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XG4gICAgICAgIHRoaXMuX3RleHQgPSBkYXRhLnRleHQ7XG4gICAgICAgIHRoaXMuX2ltYWdlTGluayA9IGRhdGEuaW1hZ2VMaW5rXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpe1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gICAgfVxuXG4gICAgX3RvZ2dsZUhlYXJ0KCl7XG4gICAgICAgIHRoaXMuX2hlYXJ0SWNvbi5jbGFzc0xpc3QudG9nZ2xlKCdwbGFjZXNfX2NhcmQtYnV0dG9uLWxpa2VkJyk7XG4gICAgfVxuXG4gICAgX3JlbW92ZUNhcmQoKXtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XG4gICAgfVxuICAgXG5cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fY2FyZC1idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3RvZ2dsZUhlYXJ0KGV2dCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fY2FyZC1kZWxldGUtaWNvblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVtb3ZlQ2FyZChldnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2NhcmQtaW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2ltYWdlTGluaywgdGV4dDogdGhpcy5fdGV4dCB9KTsgXG4gICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5faGVhcnRJY29uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fY2FyZC1idXR0b25cIik7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7IFxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19jYXJkLWltYWdlXCIpLnNyYyA9IHRoaXMuX2ltYWdlTGluaztcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYWNlc19fY2FyZC1pbWFnZVwiKS5hbHQgPSB0aGlzLl90ZXh0O1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxhY2VzX19jYXJkLXRpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcbiAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICAgIH0gXG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgfVxuXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT1cIkVzY2FwZVwiKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZXZ0KSA9PiB7IFxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX29wZW5lZFwiKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cblxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIH1cblxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgXG5cbiAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IG9iamVjdFxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG5cbiAgICAgICAgLy8gQWRkIHRoZSB2YWx1ZXMgb2YgdGhlIGZpZWxkcyB0byB0aGlzIG9iamVjdFxuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFJldHVybiB0aGUgdmFsdWVzIG9iamVjdFxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgICB9IFxuXG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG4gICAgXG5cbn07IiwiZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLW5hbWUtY2hhbmdlJyk7XG5leHBvcnQgY29uc3QgbmV3UGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWFkZC1wbGFjZScpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ndXNlck5hbWUnXVwiKTsgXG5leHBvcnQgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbbmFtZT0ndXNlckpvYiddXCIpOyBcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1wcm9maWxlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBQbGFjZVNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBsYWNlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0tcHJvZmlsZScpO1xuZXhwb3J0IGNvbnN0IHBsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1wbGFjZScpO1xuXG5cbi8vaW5pdGlhbCBjYXJkcyBmb3IgdGhlIHBhZ2VcbmV4cG9ydCAgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXG4gICAgfVxuICBdOyAiLCJpbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyAgZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcblxuXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIG5ld1BsYWNlQnV0dG9uLCBlZGl0QnV0dG9uLCBuYW1lSW5wdXQsIHRpdGxlSW5wdXQsIHBvcHVwUHJvZmlsZVNlbGVjdG9yLCBwb3B1cFBsYWNlU2VsZWN0b3IsIHByb2ZpbGVGb3JtLCBwbGFjZUZvcm0gfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBcIi4vc3R5bGVzLmNzc1wiO1xuXG4vL2luc3RhbnRpYXRlIHVzZXIgaW5mbyBjbGFzc1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe3VzZXJOYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsIHVzZXJKb2JTZWxlY3RvcjogJy5wcm9maWxlX19mdW5jdGlvbid9KTtcblxuLy9zZXQgZGVmYXVsdCB1c2VyIG5hbWUgYW5kIHVzZXIgdGl0bGVcbnVzZXJJbmZvLnNldFVzZXJJbmZvKHt1c2VyTmFtZTogXCJKYWNxdWVzIENvdXN0ZWF1XCIsIHVzZXJKb2I6IFwiRXhwbG9yZXJcIn0pO1xuXG4vL2luc3RhbnRpYXRlIHBvcHVwaW1hZ2UgY2xhc3NcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXAtcGljdHVyZVwiKTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9jcmVhdGUgaGFuZGxlQ2FyZENsaWNrIGZ1bmN0aW9uIGZvciBjYXJkc1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayh7IGxpbmssIHRleHQgfSkge1xuICBwb3B1cEltYWdlLm9wZW4obGluaywgdGV4dCk7IFxufTtcblxuLy9mdW5jdGlvbiB0byBjcmVhdGUgYSBuZXcgY2FyZFxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhLCB0ZW1wbGF0ZSwgY2FsbGJhY2spIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGRhdGEsIHRlbXBsYXRlLCBjYWxsYmFjayk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufVxuXG4vLyBnZW5lcmF0ZSBpbml0aWFsIGNhcmRzIG9uIHNjcmVlblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHsgXG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsIFxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZCh7dGV4dDogaXRlbS5uYW1lLCBpbWFnZUxpbms6IGl0ZW0ubGlua30sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgICBzZWN0aW9uLmFkZEl0ZW0oZWxlbWVudCk7XG4gIH1cbiAgfSxcbiAgXCIucGxhY2VzXCJcbik7XG5cbnNlY3Rpb24ucmVuZGVySXRlbXMoKTtcblxuLy9pbnN0YW50aWF0ZSBwb3B1cCBwbGFjZSBmb3JtXG5jb25zdCBwb3B1cFBsYWNlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXAtcGxhY2VcIiwgaGFuZGxlUGxhY2VTdWJtaXQpO1xucG9wdXBQbGFjZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL2luc3RhbnRpYXRlIHBvcHVwIHByb2ZpbGUgZm9ybVxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXAtcHJvZmlsZVwiLCBoYW5kbGVQcm9maWxlU3VibWl0KTtcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL2VuYWJsZSBmb3JtIHZhbGlkYXRpb25cbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih7XG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxufSwgXCIucG9wdXBfX2Zvcm0tcHJvZmlsZVwiKTtcblxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHBsYWNlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioe1xuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCJcbn0sIFwiLnBvcHVwX19mb3JtLXBsYWNlXCIpO1xuXG5wbGFjZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cblxuLy9hZGQgZXZlbnQgbGlzdGVuZXIgdG8gb3BlbiB0aGUgZm9ybSBmb3IgYSBuZXcgcGxhY2UgY2FyZFxubmV3UGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUGxhY2VGb3JtKTtcblxuLy9hZGQgZXZlbnQgbGlzdGVuZXIgdG8gb3BlbiB0aGUgZm9ybSBmb3IgdGhlIHByb2ZpbGVcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUHJvZmlsZVBvcHVwKTtcblxuLy9mdW5jdGlvbiB0byBvcGVuIHByb2ZpbGVcbmZ1bmN0aW9uIG9wZW5Qcm9maWxlUG9wdXAgKCkge1xuICBwcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbihwb3B1cFByb2ZpbGVTZWxlY3Rvcik7ICBcbiAgY29uc3QgeyB1c2VyTmFtZSwgdXNlckpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gdXNlck5hbWU7XG4gIHRpdGxlSW5wdXQudmFsdWUgPSB1c2VySm9iO1xuICBwb3B1cFByb2ZpbGUub3BlbigpO1xufVxuXG4vL2Z1bmN0aW9uIHRvIG9wZW4gcGxhY2UgZm9ybVxuZnVuY3Rpb24gb3BlblBsYWNlRm9ybSAoKSB7XG4gIHBsYWNlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbihwb3B1cFBsYWNlU2VsZWN0b3IpO1xuICBwb3B1cFBsYWNlLm9wZW4oKTtcbn1cblxuLy9jcmVhdGUgaGFuZGxlIHN1Ym1pdCBmdW5jdGlvbiBmb3IgY2hhbmdpbmcgcHJvZmlsZVxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZVN1Ym1pdChkYXRhKSB7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBwcm9maWxlRm9ybS5yZXNldCgpO1xufVxuXG4vL2NyZWF0ZSBoYW5kbGUgc3VibWl0IGZ1bmN0aW9uIGZvciBhZGRpbmcgbmV3IHBsYWNlc1xuIGZ1bmN0aW9uIGhhbmRsZVBsYWNlU3VibWl0KGRhdGEpe1xuICBjb25zdCBwbGFjZVRpdGxlID0gZGF0YS50aXRsZTtcbiAgY29uc3QgcGxhY2VVUkwgPSBkYXRhLmxpbms7XG5cbiAgY29uc3QgZWxlbWVudCA9IGNyZWF0ZUNhcmQoe3RleHQ6IHBsYWNlVGl0bGUsIGltYWdlTGluazogcGxhY2VVUkx9LCBcIiNjYXJkLXRlbXBsYXRlXCIsIGhhbmRsZUNhcmRDbGljayk7XG4gIHNlY3Rpb24uYWRkSXRlbShlbGVtZW50KTtcbiAgcGxhY2VGb3JtLnJlc2V0KCk7XG59O1xuXG5cblxuXG5cblxuXG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yICh7dXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yfSl7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fcHJvZmlsZUZ1bmN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdXNlck5hbWU6IHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgdXNlckpvYjogdGhpcy5fcHJvZmlsZUZ1bmN0aW9uLnRleHRDb250ZW50XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oeyB1c2VyTmFtZSwgdXNlckpvYiB9KSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdXNlck5hbWU7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVGdW5jdGlvbi50ZXh0Q29udGVudCA9IHVzZXJKb2I7XG4gICAgfVxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtcGljdHVyZV9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5fcG9wdXBJbWFnZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXBpY3R1cmVfX3RpdGxlJyk7XG4gICAgfVxuXG4gICAgb3BlbihpbWFnZUxpbmssIGltYWdlTmFtZSl7XG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBpbWFnZUxpbmspO1xuICAgICAgICB0aGlzLl9wb3B1cEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgaW1hZ2VOYW1lKTsgICAgXG4gICAgICAgIHRoaXMuX3BvcHVwSW1hZ2VUaXRsZS50ZXh0Q29udGVudCA9IGltYWdlTmFtZTtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH0gXG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7IFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgICB9XG5cbn0iXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwidGhpcyIsIl9zZXR0aW5ncyIsIl9mb3JtIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5wdXRFcnJvckNsYXNzIiwidGV4dENvbnRlbnQiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiYnV0dG9uRWxlbWVudCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9kaXNhYmxlQnV0dG9uIiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9zZXRFdmVudExpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwicmVzZXRWYWxpZGF0aW9uIiwicG9wdXAiLCJpbnB1dEVsZW1lbnRzIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJlbmFibGVWYWxpZGF0aW9uIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJfdGV4dCIsInRleHQiLCJfaW1hZ2VMaW5rIiwiaW1hZ2VMaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3RvZ2dsZUhlYXJ0IiwiX2hlYXJ0SWNvbiIsInRvZ2dsZSIsIl9yZW1vdmVDYXJkIiwiX2VsZW1lbnQiLCJsaW5rIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwib3BlbiIsImNsb3NlIiwiX2hhbmRsZUVzY0Nsb3NlIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dExpc3QiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwiZWRpdEJ1dHRvbiIsIm5ld1BsYWNlQnV0dG9uIiwibmFtZUlucHV0IiwidGl0bGVJbnB1dCIsInBvcHVwUHJvZmlsZVNlbGVjdG9yIiwicG9wdXBQbGFjZVNlbGVjdG9yIiwicHJvZmlsZUZvcm0iLCJwbGFjZUZvcm0iLCJ1c2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJfcHJvZmlsZU5hbWUiLCJfcHJvZmlsZUZ1bmN0aW9uIiwiZ2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJzZXRVc2VySW5mbyIsInBvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlVGl0bGUiLCJpbWFnZU5hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVDYXJkIiwidGVtcGxhdGUiLCJjYWxsYmFjayIsInNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicG9wdXBQbGFjZSIsInRpdGxlIiwicmVzZXQiLCJwb3B1cFByb2ZpbGUiLCJwcm9maWxlVmFsaWRhdG9yIiwicGxhY2VWYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9